(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aedb"],{"7/yO":function(e,t,a){"use strict";var n=a("EGyX");a.n(n).a},EGyX:function(e,t,a){},oZKA:function(e,t,a){"use strict";a.r(t);var n=a("P2sY"),r=a.n(n),i=a("t3Un"),l="/ccb-shop/admin/api/";var o={data:function(){return{tableData:[],currentPage:1,total:0,loading:!1,pageSize:this.$store.state["page-size"],cascades:[{id:0,name:"顶级分类"}],create:{title:"添加分类",visible:!1,form:{pid:[0],name:"",weight:0}}}},mounted:function(){this.getCategoryList()},methods:{handleChangeParent:function(){},getCascadeSort:function(){var e=this;return Object(i.a)({url:l+"categories/cascade-sort",method:"get"}).then(function(t){e.cascades=t.data})},handleEdit:function(e,t){},handleDelete:function(e,t){},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.getCategoryList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.getCategoryList()},handleCreateClick:function(){var e=this;this.getCascadeSort().then(function(){e.create.visible=!0})},getCategoryList:function(){var e=this,t=r()({page:this.currentPage,limit:this.pageSize});return this.loading=!0,function(e){return Object(i.a)({url:l+"categories",params:e,method:"get"})}(t).then(function(t){e.tableData=t.data.data,e.total=t.data.total}).finally(function(){e.loading=!1})},resetForm:function(e){this.$refs[e].resetFields()},handleCreateForm:function(){var e=this;(function(e){return Object(i.a)({url:l+"categories",method:"post",data:e})})({name:this.create.form.name,weight:this.create.form.weight,pid:this.create.form.pid[this.create.form.pid.length-1]}).then(function(t){e.getCategoryList(),e.create.visible=!1,e.resetForm("create.form")})}}},s=(a("7/yO"),a("KHd+")),c=Object(s.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-alert",{attrs:{closable:!1,title:"基础数据，请谨慎处理！",type:"warning"}}),e._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleCreateClick}},[e._v(e._s(e.create.title))])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,border:"","empty-text":"没有数据"}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"path",label:"上级分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.parent?a("div",[e._v(e._s(t.row.parent.name))]):e._e(),e._v(" "),t.row.parent?e._e():a("div",[e._v("无")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"当前层级"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",[a("el-col",[e._v("\n       \n    ")])],1),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.currentPage,"page-sizes":e.$store.state["page-sizes"],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{visible:e.create.visible,title:e.create.title},on:{"update:visible":function(t){e.$set(e.create,"visible",t)}}},[a("el-form",{ref:"create.form",attrs:{model:e.create.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"上级分类",prop:"pid"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.cascades,props:{value:"id",label:"name"},filterable:"","change-on-select":""},on:{change:e.handleChangeParent},model:{value:e.create.form.pid,callback:function(t){e.$set(e.create.form,"pid",t)},expression:"create.form.pid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.create.form.name,callback:function(t){e.$set(e.create.form,"name",t)},expression:"create.form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"weight"}},[a("el-input",{model:{value:e.create.form.weight,callback:function(t){e.$set(e.create.form,"weight",t)},expression:"create.form.weight"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.create.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateForm}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"4cb35a4c",null);c.options.__file="index.vue";t.default=c.exports}}]);